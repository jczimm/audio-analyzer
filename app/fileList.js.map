{"version":3,"sources":["fileList.js"],"names":[],"mappings":";;;;;;;;;;;;;;oBAEiB,MAAM;;;;oBAEN,QAAQ;;;;6BACC,iBAAiB;;;;;;IAGrC,QAAQ;AAEC,aAFT,QAAQ,CAEE,cAAc,EAAE;8BAF1B,QAAQ;;AAGN,YAAI,CAAC,cAAc,GAAG,cAAc,CAAC;AACrC,YAAI,CAAC,KAAK,GAAG,EAAE,CAAC;KACnB;;iBALC,QAAQ;;eAOH,iBAAC,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAE;AACnC,gBAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG;AACnB,qBAAK,EAAE,MAAM;AACb,2BAAW,EAAE,WAAW;aAC3B,CAAC;SACL;;;eAEU,qBAAC,QAAQ,EAAE;AAClB,gBAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,gBAAI,QAAQ,GAAG,kBAAK,QAAQ,CAAC,QAAQ,CAAC;gBAClC,WAAW,CAAC;;AAEhB,mBAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;AACpC,kCAAK,oBAAoB,CAAC,QAAQ,CAAC,CAC9B,IAAI,CAAC,UAAC,kBAAkB,EAAK;;AAE1B,wBAAI,kBAAkB,GAAG,kBAAK,sBAAsB,CAAC,kBAAkB,CAAC,CAAC;;;;;;;;AAQzE,wBAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,CAChB,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,mCAAmC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAC/E,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;;;;AAI1E,wBAAI,SAAS,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACtG,wBAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;;AAExB,wBAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;;;AAG1C,wBAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,KAAK,EAAE,CAAC;;AAE1C,+BAAW,GAAG,kBAAkB,CAAC;AACjC,wBAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,kBAAK,QAAQ,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC,CAAC;;AAEzD,2BAAO,CAAC,QAAQ,CAAC,CAAC;iBACrB,CAAC,SACI,CAAC,UAAC,GAAG,EAAK;AACZ,uBAAG,CAAC,MAAM,GAAG,IAAI,CAAC;AAClB,uBAAG,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC;;AAEtB,0BAAM,CAAC,GAAG,CAAC,CAAC;iBACf,CAAC,CAAC;aACV,CAAC,CAAC;SACN;;;WA1DC,QAAQ;;;qBA6DC,QAAQ","file":"fileList.js","sourcesContent":["/* jshint esnext: true */\r\n\r\nimport path from 'path';\r\n\r\nimport util from './util';\r\nimport notifications from './notifications';\r\n\r\n//\r\nclass FileList {\r\n\r\n    constructor(trackListTable) {\r\n        this.trackListTable = trackListTable;\r\n        this.files = {};\r\n    }\r\n\r\n    addFile(filePath, $entry, trackLength) {\r\n        this.files[filePath] = {\r\n            entry: $entry,\r\n            trackLength: trackLength\r\n        };\r\n    }\r\n\r\n    displayFile(filePath) {\r\n        var self = this;\r\n\r\n        var fileName = path.basename(filePath),\r\n            trackLength;\r\n\r\n        return new Promise((resolve, reject) => {\r\n            util.getLengthOfAudioFile(filePath)\r\n                .then((trackLengthSeconds) => {\r\n\r\n                    var _trackLengthPretty = util.convertSecondsToHHMMSS(trackLengthSeconds);\r\n\r\n                    // <tr>\r\n                    //     <td class=\"mdl-data-table__cell--non-numeric\">Track Name.ext</td>\r\n                    //     <td>hh:mm:ss</td>\r\n                    // </tr>\r\n\r\n                    // build row\r\n                    var $row = $(\"<tr/>\")\r\n                        .append($(\"<td/>\").addClass(\"mdl-data-table__cell--non-numeric\").text(fileName))\r\n                        .append($(\"<td/>\").addClass(\"track-length\").text(_trackLengthPretty));\r\n\r\n                    // add checkbox artificially (as opposed to reinitializing table as a MaterialDataTable so that checkboxes are generated)\r\n\r\n                    var $checkbox = $(\"<td/>\").addClass(\"label\").append(self.trackListTable.createCheckbox_($row.get(0)));\r\n                    $row.prepend($checkbox);\r\n\r\n                    $row.appendTo($trackList.find(\"> tbody\"));\r\n\r\n                    // hacky...\r\n                    $row.find(\"input[type=checkbox]\").click();\r\n\r\n                    trackLength = trackLengthSeconds;\r\n                    self.addFile(filePath, util.withRefs($row), trackLength);\r\n\r\n                    resolve(filePath);\r\n                })\r\n                .catch((err) => {\r\n                    err.notify = true;\r\n                    err.args = [filePath];\r\n                    // util.handleError(err);\r\n                    reject(err);\r\n                });\r\n        });\r\n    }\r\n}\r\n\r\nexport default FileList;\r\n"],"sourceRoot":"/source/"}